<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RestFul API | Tech notes</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="description" content="Record what I have learnt so far ..">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/assets/css/0.styles.dd4231d3.css" as="style"><link rel="preload" href="/assets/js/app.d0569170.js" as="script"><link rel="preload" href="/assets/js/2.a511a718.js" as="script"><link rel="preload" href="/assets/js/42.9554ca17.js" as="script"><link rel="prefetch" href="/assets/js/10.e5cdb9ac.js"><link rel="prefetch" href="/assets/js/11.d10ed402.js"><link rel="prefetch" href="/assets/js/12.972491ac.js"><link rel="prefetch" href="/assets/js/13.21fefb66.js"><link rel="prefetch" href="/assets/js/14.b68eb463.js"><link rel="prefetch" href="/assets/js/15.d8a2952f.js"><link rel="prefetch" href="/assets/js/16.cb26a885.js"><link rel="prefetch" href="/assets/js/17.6d021c0f.js"><link rel="prefetch" href="/assets/js/18.a48b1ef1.js"><link rel="prefetch" href="/assets/js/19.4a3bd77e.js"><link rel="prefetch" href="/assets/js/20.039560cd.js"><link rel="prefetch" href="/assets/js/21.933d8efb.js"><link rel="prefetch" href="/assets/js/22.1c49105f.js"><link rel="prefetch" href="/assets/js/23.68c764b5.js"><link rel="prefetch" href="/assets/js/24.437b185b.js"><link rel="prefetch" href="/assets/js/25.565d92d2.js"><link rel="prefetch" href="/assets/js/26.de5cda69.js"><link rel="prefetch" href="/assets/js/27.a6a3ab52.js"><link rel="prefetch" href="/assets/js/28.4a014e74.js"><link rel="prefetch" href="/assets/js/29.93e92214.js"><link rel="prefetch" href="/assets/js/3.9ac54cc1.js"><link rel="prefetch" href="/assets/js/30.fdead012.js"><link rel="prefetch" href="/assets/js/31.c8273f0b.js"><link rel="prefetch" href="/assets/js/32.c775f931.js"><link rel="prefetch" href="/assets/js/33.1113b449.js"><link rel="prefetch" href="/assets/js/34.2c660513.js"><link rel="prefetch" href="/assets/js/35.23b3ffb5.js"><link rel="prefetch" href="/assets/js/36.f8cab74b.js"><link rel="prefetch" href="/assets/js/37.29550b8f.js"><link rel="prefetch" href="/assets/js/38.4b49334b.js"><link rel="prefetch" href="/assets/js/39.4d66d9c5.js"><link rel="prefetch" href="/assets/js/4.7824d494.js"><link rel="prefetch" href="/assets/js/40.704ef8d8.js"><link rel="prefetch" href="/assets/js/41.29fae567.js"><link rel="prefetch" href="/assets/js/43.d2f84157.js"><link rel="prefetch" href="/assets/js/44.3aaa2a08.js"><link rel="prefetch" href="/assets/js/45.5e9f1b92.js"><link rel="prefetch" href="/assets/js/46.c3c0d9a9.js"><link rel="prefetch" href="/assets/js/47.d7dab450.js"><link rel="prefetch" href="/assets/js/48.98fbbc77.js"><link rel="prefetch" href="/assets/js/49.6df1a995.js"><link rel="prefetch" href="/assets/js/5.6e3fa849.js"><link rel="prefetch" href="/assets/js/50.d198b0e1.js"><link rel="prefetch" href="/assets/js/51.c9de1d8a.js"><link rel="prefetch" href="/assets/js/52.6db266e1.js"><link rel="prefetch" href="/assets/js/53.327c6dca.js"><link rel="prefetch" href="/assets/js/54.9acf032b.js"><link rel="prefetch" href="/assets/js/55.edb41043.js"><link rel="prefetch" href="/assets/js/56.0b3ddf98.js"><link rel="prefetch" href="/assets/js/57.0ce1f22a.js"><link rel="prefetch" href="/assets/js/58.90056c95.js"><link rel="prefetch" href="/assets/js/59.55288be3.js"><link rel="prefetch" href="/assets/js/6.621a2e88.js"><link rel="prefetch" href="/assets/js/60.faf1dada.js"><link rel="prefetch" href="/assets/js/7.4f057e4f.js"><link rel="prefetch" href="/assets/js/8.c2cbe883.js"><link rel="prefetch" href="/assets/js/9.6d210aef.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dd4231d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Tech notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Dashboard
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  About
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Dashboard
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  About
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/_posts/avoid-use-else.html" class="sidebar-link">Avoid Using 'else'</a></li><li><a href="/_posts/learnt-concepts.html" class="sidebar-link">Learnt Concepts</a></li><li><a href="/_posts/css-bem.html" class="sidebar-link">BEM (CSS)</a></li><li><a href="/_posts/bff.html" class="sidebar-link">BFF (Backend For Frontend)</a></li><li><a href="/_posts/css-tips.html" class="sidebar-link">CSS Tips (General)</a></li><li><a href="/_posts/debug-101.html" class="sidebar-link">Debug Tips (General)</a></li><li><a href="/_posts/docker-damon.html" class="sidebar-link">Docker (Damon)</a></li><li><a href="/_posts/git-tips.html" class="sidebar-link">Git Tips</a></li><li><a href="/_posts/js-arrow-function.html" class="sidebar-link">JavaScript: Arrow Function</a></li><li><a href="/_posts/js-callback-promise-async-await.html" class="sidebar-link">JavaScript: Callback - Promise - Async Await</a></li><li><a href="/_posts/js-class-prototype.html" class="sidebar-link">JavaScript: Class - Prototype</a></li><li><a href="/_posts/js-closure.html" class="sidebar-link">JavaScript: Closure</a></li><li><a href="/_posts/js-pieces.html" class="sidebar-link">JavaScript: Code Pieces</a></li><li><a href="/_posts/js-event-loop.html" class="sidebar-link">JavaScript: Event Loop</a></li><li><a href="/_posts/js-common-note.html" class="sidebar-link">JavaScript: Common note</a></li><li><a href="/_posts/js-high-order-functions.html" class="sidebar-link">JavaScript: High Order Functions</a></li><li><a href="/_posts/js-hoisting.html" class="sidebar-link">JavaScript: Hoisting</a></li><li><a href="/_posts/js-patterns.html" class="sidebar-link">JavaScript: Common Patterns</a></li><li><a href="/_posts/js-immutability.html" class="sidebar-link">JavaScript: Immutability</a></li><li><a href="/_posts/ts-basics.html" class="sidebar-link">TypeScript: Basics (101)</a></li><li><a href="/_posts/sql-tips.html" class="sidebar-link">SQL (101)</a></li><li><a href="/_posts/node-tips.html" class="sidebar-link">NodeJS (101)</a></li><li><a href="/_posts/js-module-systems.html" class="sidebar-link">JavaScript Module Systems</a></li><li><a href="/_posts/js-reduce-method.html" class="sidebar-link">JavaScript Reduce Method (Use cases)</a></li><li><a href="/_posts/just-code.html" class="sidebar-link">Code Practices (Mostly JavaScript)</a></li><li><a href="/_posts/npms.html" class="sidebar-link">Npm packages (Common)</a></li><li><a href="/_posts/one-word-tips.html" class="sidebar-link">One word (Quick memo)</a></li><li><a href="/_posts/postgres-tips.html" class="sidebar-link">PostgreSQL Note</a></li><li><a href="/_posts/problems-resolved.html" class="sidebar-link">Problems Resolved (Records)</a></li><li><a href="/_posts/react-hoc.html" class="sidebar-link">React: High Order Component</a></li><li><a href="/_posts/react-hooks.html" class="sidebar-link">React: Hooks</a></li><li><a href="/_posts/react-lifecycles.html" class="sidebar-link">React: Lifecycle Methods</a></li><li><a href="/_posts/redux-tips.html" class="sidebar-link">React: Redux 101</a></li><li><a href="/_posts/restful-api.html" aria-current="page" class="active sidebar-link">Restful API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/_posts/rxjs-trials.html" class="sidebar-link">RXJS Trials</a></li><li><a href="/_posts/react-ssr.html" class="sidebar-link">React: Server Side Rendering</a></li><li><a href="/_posts/solid-principles.html" class="sidebar-link">Software Development: Solid Principles</a></li><li><a href="/_posts/tips-to-read.html" class="sidebar-link">Tips to read before too late</a></li><li><a href="/_posts/tricky-codes.html" class="sidebar-link">Tricky code</a></li><li><a href="/_posts/ts-101.html" class="sidebar-link">TypeScript 101</a></li><li><a href="/_posts/underscore-js.html" class="sidebar-link">UnderscoreJS 101</a></li><li><a href="/_posts/unit-tests-tips.html" class="sidebar-link">Unit Tests 101</a></li><li><a href="/_posts/vue-tips.html" class="sidebar-link">VueJS 101</a></li><li><a href="/_posts/vuex-101.html" class="sidebar-link">VueX 101</a></li><li><a href="/_posts/web-accessibility.html" class="sidebar-link">Web Accessibility 101</a></li><li><a href="/_posts/webpack-101.html" class="sidebar-link">Webpack 101</a></li><li><a href="/_posts/weekly-tips.html" class="sidebar-link">Weekly tips</a></li><li><a href="/_posts/whats-the-output.html" class="sidebar-link">What is the output</a></li><li><a href="/_posts/web3.html" class="sidebar-link">Web3</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="restful-api"><a href="#restful-api" class="header-anchor">#</a> RestFul API</h3> <h4 id="concept"><a href="#concept" class="header-anchor">#</a> Concept:</h4> <p>Wording: Representational State Transfer (REST)</p> <p><code>REST !== HTTP</code></p> <p>Currently understanding (might be wrong), RESTFul API is an architectural style which uses HTTP requests to access/use data (resource), more like an architectural design pattern</p> <p>REST determines how the API looks like, developers can set bunch of rules to create their own customized APIs</p> <p>1). Common Http request consists of</p> <div class="language- extra-class"><pre class="language-text"><code>- The endpoint: URL for the request
- The method: GET/PUT/POST/DELETE/PATCH
- The headers: cookie/token/content-type/parameters ...
- The data (or body): object to save to db ...
</code></pre></div><p>2). Data format supported:</p> <div class="language- extra-class"><pre class="language-text"><code>- application/json
- application/xml
- application/x-wbe+xml
- application/x-www-form-urlencoded
- multipart/form-data
</code></pre></div><h4 id="rules-to-follow"><a href="#rules-to-follow" class="header-anchor">#</a> Rules to follow:</h4> <p>*. Accept and respond with JSON</p> <p>Example: Express <code>bodyParser</code> Middleware</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// old version</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// newer version</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>*. Use nouns instead of verbs in endpoint paths and naming collections with plural nouns, eg: <code>/products</code></p> <p>*. Handle errors gracefully and return standard HTTP error codes</p> <p>*. Allow filtering, sorting, and pagination (For larger data loading consideration)</p> <p>*. Cache data to improve performance, consider like <code>Redis</code></p> <p>*. Versioning our APIs, How? see below:</p> <p>Commonly, put the route under each of <code>folder</code>, like v1, v2 etc ..</p> <p>Example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> express <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span>

<span class="token comment">// v1/get-product.js</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/products/:id'</span><span class="token punctuation">,</span> <span class="token function">middlewareFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Your code logic</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/v1'</span><span class="token punctuation">,</span> router<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// v2/get-product.js</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/products/:id'</span><span class="token punctuation">,</span> <span class="token function">middlewareFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Your code logic</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/v2'</span><span class="token punctuation">,</span> router<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>*. Nesting resources for hierarchical objects</p> <p>Example: If we have comments nested with each post, we need to define our API route like this:</p> <p><code>posts/:postId/comments</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or use this version</span>
<span class="token comment">// app.use(express.json());</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/posts/:postId/comments'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> postId <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token keyword">const</span> comments <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// code to get comments by postId</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>comments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server started'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="how-to-handle-api-request-failure"><a href="#how-to-handle-api-request-failure" class="header-anchor">#</a> How to handle API request failure</h4> <p>When you write an API, you need to consider about API request failure case, when API request failed, normally we want to give a chance a retry chance to make request again and again.</p> <p>However, if you consider the retry too frequently, it will cause the issue which is  DDOS (Distributed Denial of Service), which means too many requests for the server to handle, which will cause server down !!</p> <p>In the above case, the solution for resolving the issue is to use a BACK-OFF strategy, which will play a similar role like Gmail, retry 30s, retry 1 min, retry 2 mins, retry 5 mins, retry 10 mins so on and so on.</p> <p>In this way, we can make server handle request not too frequently so we can avoid the DDOS attack from outside.</p> <p>References:</p> <p>(1). <a href="https://stackoverflow.blog/2020/03/02/best-practices-for-rest-api-design/" target="_blank">Restful API design</a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/_posts/redux-tips.html" class="prev">
        React: Redux 101
      </a></span> <span class="next"><a href="/_posts/rxjs-trials.html">
        RXJS Trials
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d0569170.js" defer></script><script src="/assets/js/2.a511a718.js" defer></script><script src="/assets/js/42.9554ca17.js" defer></script>
  </body>
</html>
